# Macro Meets Microchips
Over the past decade, AI has become one of the hottest sectors in the world. Companies are investing large amounts into AI infrastructure, which has created a large demand for NVIDIA products. As companies integrate more AI into their infrastructure, we expect them to replace certain jobs. My hypothesis is that there may be a relationship between the demand for NVIDIA Stock and US Unemployment Rates. The S&P 500 will be used as a benchmark to measure the overall economyâ€™s health and help reduce noise. 

# Data sources
| Data Source | Name/Short Description | Source/URL | Type | List of Fields | Format | Estimated Data Size |
|--------------|------------------------|-------------|------|----------------|---------|---------------------|
| 1 | NVIDIA Historical Stock Prices| API Call | API Call | Date, Open, High, Low, Close | API Call to CSV | 308 |
| 2 | SPY Historical Stock Prices| API Call | API Call | Date, Open, High, Low, Close | API Call to CSV | 308 |
|3 | US Unemployment Rate | API Call | API Call | Date, Unrate | API Call to CSV | 308 |

# Analysis
I extracted the data using my get_fred_data() and get_stock_data() functions in my load.py. I made sure to make them flexible to allow any user to download any dataset from either source to run a similar/identical analysis. Once the data was extracted via API, I processed both datasets.

For the US Unemployment Rate dataset, I reset the index and set the column names to standardized names. I made sure to convert the 'Date' column into a DateTime type as well. Finally, I added a 'covid' parameter that dictates whether to interpolate the data for the COVID Period. From the line graph, there are clear outliers, so I created a 6 month moving average line to help validate whether they are outliers. The moving average smooths short term fluctuations, which helps us identify irregularity. On the Unemployment Rate line graph, the moving average line does not reach the same peak as the raw data during COVID. This tells us that there was such a sudden change in Unemployment Rate that the moving average could not smooth it out. Combined with our domain knowledge that COVID was an unprecedented event, I declared this COVID period an outlier. I used the dates declared by the World Health Organization(WHO) to determine when COVID started and ended. By using this parameter, the large spike in Unemployment Rate is smoothed. We see another large spike from 2008-2012, and this is due to the Global Financial Crisis. However, this was a more gradual economic event, and this is reflected in our moving average line as well. Therefore, it is not considered an outlier. 

For the Stock Data, I reset the index and removed the mult-index. I also made sure to convert the 'Date' column into a datetime data type. I added a 'log' parameter that dictates whether to log-transform the Close Price. I used log-transformation to normalize the data because stock prices drastically change and are on a larger scale. The log-transformation reduces variance in our analysis and makes the data more comparable. Therefore, we are able to perform a better correlation analysis. Finally, I selected the Date Column and log-transformed stock close price as the dataset for analysis. 

After extracting and processing the data, I used my custom data visualization functions to produce my correlation analysis. The results are summarized in the next section.

# Results 
Using the analyze.py file, I created a basic histogram and line graph of each dataset. NVIDIA and SPY had very similar line charts, as they both trend upwards. Since NVIDIA is a part of the S&P 500, we expect both of these datasets to have strong correlation. However, the S&P 500 is a better indicator of the overall US Economic Health because NVIDIA is vulnerable to many company factors. When we look at the US Unemployment Rate graphs, we do not see any clear trends. All three line graphs have a 6 month moving average, which was used to show any signs of irregularity. After processing the data, we do not see any irregularties in the moving average line. 

The correlation analysis plots provide us with more information on the relationships of the datasets. When we look at the NVIDIA Log Close price and US Unemployment Rate scatter plot, we can see a moderate negative correlation (r = -.57). This graph suggests that higher NVIDIA Log Close Prices are associated with lower US Unemployment Rate, and vice versa. We can also see the same exact moderate negative correlation trend with SPY Log Close Price and US Unemployment Rate (r = -.58). However, according to our heatmaps, SPY Log Close Price is slightly more negatively correlated to US Unemployment Rate than NVIDIA. To get a better visualization of all three datasets, I created a combined line graph and heatmap. It provides a better visualization on the relationships. As expected, NVIDIA and SPY are highly correlated with each other (r = .96). 

Finally, I segmented the data into Pre-AI Boom and Post-AI Boom periods for correlation analysis. Although Artificial Intelligence has been a concept for decades, it has only become extremely relevant recently. I defined the start of the AI Boom as December 1st, 2015, when OpenAI was founded. When we look at Pre-AI Boom visualizations, we actually see that NVIDIA Log Close Price and SPY Log Close Price had little to no correlation with Unemployment Rate(r= .043 and r = -.023). This means that there was very little to no relationship between these variables prior to the AI Boom. When we look at the Post-AI boom, we actually see that there is a moderate negative correlation between NVIDIA Log Close Price and US Unemployment Rate (r = -.41). There is also a slightly stronger moderate negative correlation between SPY Log Close Price and US Unemployment Rate (r = -.47). Since the S&P 500 is representative of the entire stock market, it is less vulnerable to company-specific policies.

Contrary to my initial hypothesis, we see that as NVIDIA Log Close Price increases or decreases, we will see the US Unemployment Rate move in the opposite direction. However, we can see that post 2022 (ChatGPT Creation), there is a stronger positive correlation between NVIDIA and Unemployment Rate. With more time and data, we may actually see different results in this analysis. It should be noted that this analysis identifies correlation and not causation. Therefore, we cannot say that changes in NVIDIA Log Close Price affect Unemployment Rate. However, with this analysis, we can say that there is a moderate negative relationship between the NVIDIA Log Close Price and US Unemployment Rate. 


# Installation
- The only API key required for this project is a free FRED API Key. After creating a free account, the user will receive an API Key. The user should set this variable 'FRED_API_KEY' to the FRED API Key in the .env file. They can refer to the .env.example file to create the .env file. In the project's config.py file, the user will be using the load_dotenv function from the dotenv Python package to load the API Key. This prevents the user from hard coding the API key into their code, which is very bad practice. 
- I used a handful of Python Packages. os is a Python Package that allows users to navigate through files and directories. I use it to navigate through files and directories, as well as create directories if they do not exist. I use Pandas and Numpy as powerful data analysis tools. Pandas allowed me to easily parse, clean, edit, and filter data, while Numpy allowed me to make log operation compputations easily. yfinance is a Python Package that allowed me to obtain historical market data from Yahoo Finance. I used yfinance to obtain my SPY and NVIDIA stock data. fredapi is a Python wrapper, which I used to retrive data from the Federal Reserve Economic Data (FRED) using an API Key and special parameters. Finally. I used seaborn and matplotlib as my main tools for data visualization. I used seaborn to make simple statistical plots, and I used matplotlib to help with titles/labels.

# Running analysis 
Create free FRED account and obtain API Key. Create API_FRED_KEY and set the API Key in the .env file. Please refer to .env.example as a reference for the .env file. 

From `src/` directory run:

`python main.py`

Results will appear in `results/` folder.